## Cambios

### üîê **Sistema de Autenticaci√≥n y Autorizaci√≥n**
- **Backend**: -corregido middleware de autorizaci√≥n para extraer correctamente userId del token JWT
- **Backend**: -corregidos handlers de eventos para usar req.user.id en lugar de req.userId
- **Frontend**: -corregidas todas las funciones para usar localStorage.getItem('token') en lugar de localStorage.token
- **Frontend**: -actualizadas funciones de autenticaci√≥n: isUserLoggedIn, getUserId, getUserRole
- **Backend**: -agregada validaci√≥n de ownership en deleteEvent para asegurar que solo el propietario pueda eliminar eventos
- **Backend**: -actualizado handler de autenticaci√≥n para devolver token, userId y role en la respuesta
- **Frontend**: -actualizada funci√≥n loginUser para guardar userId y role en localStorage
- **Frontend**: -actualizada funci√≥n logoutUser para limpiar todos los datos de autenticaci√≥n
- **Frontend**: -actualizadas todas las funciones para usar localStorage.getItem('token') en lugar de localStorage.token
- **Frontend**: -corregidas funciones de autenticaci√≥n: isUserLoggedIn, getUserId, getUserRole, isUserRoleRegular, isUserRoleModerator
- **Frontend**: -actualizadas funciones de h√°bitos y progreso para usar el nuevo formato de token
- **Frontend**: -corregidas todas las funciones que usaban localStorage.token: deleteHabit, updateHabit, trackProgress, getProgress, deleteProgress, getUserName
- **Frontend**: -actualizadas funciones para usar localStorage.getItem('token') consistentemente
- **Backend**: -aumentado tiempo de expiraci√≥n del JWT de 1h a 7d
- **Frontend**: -agregado bot√≥n de logout en Settings
- **Frontend**: -corregida URL de API en updateUser.js para usar http://localhost:3000/users/update en lugar de /api/users/update, solucionando error al guardar cambios en Settings

### üéØ **Sistema de Metas (Goals)**
- **Frontend**: -corregido error "undefined is not an object (evaluating 'goals.length')" en Goals.jsx
- **Frontend**: -agregadas verificaciones de seguridad para manejar arrays undefined/null
- **Frontend**: -mejorado manejo de errores en loadGoals y loadHabits
- **Frontend**: -corregida funci√≥n getGoals para manejar respuestas del backend correctamente
- **Frontend**: -corregida funci√≥n getHabits para manejar respuestas del backend correctamente
- **Frontend**: -corregidas funciones deleteGoal y updateGoal para usar localStorage.getItem('token')
- **Sistema**: -metas ahora funcionan completamente sin errores de autenticaci√≥n
- **Frontend**: -actualizado componente Goals para mostrar todas las categor√≠as de h√°bitos disponibles con emojis
- **Frontend**: -mejorada interfaz de selecci√≥n de h√°bitos en Goals con informaci√≥n visual del h√°bito seleccionado
- **Frontend**: -agregada informaci√≥n de categor√≠a en el selector de h√°bitos de Goals
- **Backend**: -actualizado modelo Goal para incluir campos targetDays, startDate, endDate, completedCount
- **Backend**: -creada funci√≥n addGoal para crear metas con per√≠odo personalizado y objetivo espec√≠fico
- **Backend**: -creada funci√≥n getGoals para obtener metas con informaci√≥n de progreso calculada
- **Backend**: -actualizados handlers de goals para manejar nuevas funcionalidades
- **Frontend**: -implementado formulario completo para crear metas con nombre, d√≠as objetivo y veces a completar
- **Frontend**: -agregada validaci√≥n de formulario: objetivo no puede ser mayor que d√≠as, valores positivos
- **Frontend**: -implementada lista de metas existentes con barras de progreso visuales
- **Frontend**: -agregados indicadores de estado: Completada, Expirada, d√≠as restantes
- **Frontend**: -barras de progreso con colores din√°micos seg√∫n porcentaje (verde, amarillo, naranja, rojo)
- **Frontend**: -integraci√≥n completa entre metas y progreso de h√°bitos: las metas se actualizan autom√°ticamente
- **Frontend**: -corregido componente Goals para cargar h√°bitos din√°micamente desde la base de datos en lugar de usar array hardcodeado
- **Frontend**: -eliminado array hardcodeado de h√°bitos en Goals.jsx que causaba errores de "Cast to ObjectId failed"
- **Frontend**: -implementada carga din√°mica de h√°bitos usando getHabits() en el componente Goals
- **Frontend**: -corregida selecci√≥n de h√°bitos para usar habit._id (ObjectId real) en lugar de habit.id (n√∫mero)
- **Frontend**: -agregada validaci√≥n para asegurar que se seleccione un h√°bito antes de crear una meta
- **Backend**: -sistema de metas ahora funciona correctamente con ObjectIds reales de h√°bitos
- **Frontend**: -corregido error de "Cast to ObjectId failed for value '15'" al crear metas
- **Sistema**: -integraci√≥n completa entre progreso de h√°bitos y metas: marcar h√°bitos como "done" actualiza autom√°ticamente el contador de metas relacionadas
- **Backend**: -funci√≥n getGoals calcula progreso en tiempo real contando registros de Progress con status 'done' dentro del per√≠odo de la meta
- **Frontend**: -contador de metas se actualiza autom√°ticamente al recargar la p√°gina de Goals
- **Sistema**: -metas ahora funcionan completamente: creaci√≥n, visualizaci√≥n y seguimiento de progreso autom√°tico
- **Backend**: -corregida funci√≥n getGoals para filtrar metas con h√°bitos v√°lidos (no null), solucionando error "Cannot read properties of null"
- **Frontend**: -corregida llamada a getHabits en Goals.jsx para incluir fecha como par√°metro requerido

### üóìÔ∏è **Sistema de Eventos (Diary)**
- **Backend**: -corregido handler addEventHandler para usar req.user.id correctamente
- **Backend**: -corregido handler deleteEventHandler para incluir userId en la validaci√≥n
- **Backend**: -agregada validaci√≥n de ownership en deleteEvent
- **Frontend**: -corregidas funciones addEvent, getEvents, deleteEvent, updateEvent para usar localStorage.getItem('token')
- **Sistema**: -eventos ahora se crean y eliminan correctamente sin errores de validaci√≥n
- **Frontend**: -implementada funcionalidad completa del diario con vista de calendario y eventos por hora
- **Frontend**: -agregado componente Calendar con navegaci√≥n de fechas y selecci√≥n de d√≠a espec√≠fico
- **Frontend**: -implementado formulario de agregar eventos con campos: nombre, descripci√≥n, fecha y hora de inicio
- **Frontend**: -agregada validaci√≥n de formulario: campos requeridos y formato de fecha/hora
- **Frontend**: -implementada vista de eventos organizados por hora (00:00 a 23:00) en el diario
- **Frontend**: -agregado bot√≥n de eliminar eventos (üóëÔ∏è) con confirmaci√≥n antes de eliminar
- **Frontend**: -implementada funci√≥n handleDeleteEvent con validaci√≥n de ID y manejo de errores
- **Backend**: -creado modelo Event con campos: name, description, startDate, endDate, frequency, user
- **Backend**: -implementada funci√≥n addEvent para crear eventos con validaci√≥n de datos
- **Backend**: -implementada funci√≥n getEvents para obtener eventos del usuario por fecha
- **Backend**: -implementada funci√≥n deleteEvent para eliminar eventos con validaci√≥n de ownership
- **Backend**: -agregados handlers para eventos: addEventHandler, getEventsHandler, deleteEventHandler
- **Backend**: -configuradas rutas de eventos: POST /events, GET /events, DELETE /events/:eventId
- **Backend**: -corregida ruta de eliminaci√≥n de eventos para usar par√°metro :eventId en lugar de body
- **Sistema**: -integraci√≥n completa entre frontend y backend para gesti√≥n de eventos del diario
- **Sistema**: -eventos se muestran visualmente en el horario correcto seg√∫n fecha y hora de inicio
- **Sistema**: -eliminaci√≥n de eventos actualiza autom√°ticamente la vista sin necesidad de recargar
- **UX**: -interfaz intuitiva para agregar, visualizar y eliminar eventos del diario personal
- **Frontend**: -corregido el solapamiento de eventos en el diario; ahora cada evento se muestra en su propio bloque y con separaci√≥n visual
- **Frontend**: -agregado padding inferior al √°rea de horarios del diario para asegurar que la hora 23:00 siempre sea visible y no quede oculta tras el Footer
- **Frontend**: -corregido problema de eventos que se guardaban en hora incorrecta (3 horas adelante) debido a conversi√≥n de zona horaria
- **Frontend**: -implementado uso de Date.UTC() para crear fechas en UTC y evitar problemas de zona horaria
- **Frontend**: -corregido problema de eventos con fechas inv√°lidas que causaban warnings en consola
- **Frontend**: -actualizado filtrado de eventos para usar startDate en lugar de startTime (coincide con backend)
- **Frontend**: -corregido error de selectedDate.toISOString() que causaba TypeError
- **Frontend**: -redise√±ada completamente la interfaz del Diary: eliminado sistema de clics en slots de tiempo
- **Frontend**: -implementado formulario tradicional para agregar eventos con campos: nombre, descripci√≥n, hora inicio, hora fin
- **Frontend**: -agregada lista de eventos organizada por fecha con dise√±o de tarjetas
- **Frontend**: -implementado bot√≥n de eliminar eventos con confirmaci√≥n
- **Frontend**: -agregada validaci√≥n HTML5 nativa para todos los campos del formulario
- **Frontend**: -implementado dise√±o responsivo con grid adaptativo para el formulario
- **Frontend**: -agregado mensaje cuando no hay eventos para una fecha espec√≠fica
- **Frontend**: -corregido problema de actualizaci√≥n del frontend tras agregar eventos
- **Frontend**: -implementada recarga autom√°tica de eventos tras agregar nuevo evento
- **Frontend**: -corregido problema de desfase de fecha en el calendario (mostraba un d√≠a adelante)
- **Frontend**: -actualizado componente Calendar para usar toLocaleDateString('en-CA') en lugar de toISOString()
- **Frontend**: -sincronizado calendario con lista de eventos para mostrar fecha correcta
- **Sistema**: -Diary completamente funcional con formulario intuitivo y sincronizaci√≥n perfecta entre calendario y eventos

### üß† **Sistema de H√°bitos (Habits)**
- **Frontend**: -agregados emojis a todos los h√°bitos predefinidos
- **Frontend**: -mejorada interfaz de selecci√≥n de h√°bitos con emojis
- **Frontend**: -corregido URL de API en addHabit.js, getHabits.js, deleteHabit.js, updateHabit.js
- **Frontend**: -mejorado debugging en HabitSelection.jsx
- **Frontend**: -agregado mensaje de √©xito al agregar h√°bito
- **Backend**: -permitido emojis de hasta 8 caracteres en la validaci√≥n
- **Frontend**: -corregido env√≠o de categor√≠a 'negativos' en vez de 'h√°bitos negativos' para h√°bitos negativos 
- **Frontend**: -ahora todas las categor√≠as de h√°bitos se env√≠an exactamente como espera el backend (usando un categoryMap)
- **Frontend**: -mejorado el manejo de errores al agregar h√°bitos, mostrando siempre el mensaje real del backend
- **Frontend**: -tras agregar un h√°bito, la app recarga la p√°gina para asegurar que la lista se actualiza correctamente 
- **Backend**: -agregado l√≠mite m√°ximo de 10 h√°bitos por d√≠a (adem√°s del l√≠mite por usuario)
- **Frontend**: -implementada funcionalidad de botones para completar (‚úîÔ∏è) y eliminar (‚ùå) h√°bitos 
- **Frontend**: -corregida URL y par√°metros de trackProgress para que funcione con el backend
- **Frontend**: -mejorada actualizaci√≥n de lista de h√°bitos sin recargar toda la p√°gina 
- **Frontend**: -corregida funci√≥n addProgress para que coincida con la funci√≥n del backend 
- **Backend**: -corregido el endpoint DELETE de h√°bitos para que env√≠e respuesta HTTP tras eliminar, solucionando el bug de carga infinita en el frontend
- **Backend**: -corregido el handler de progreso (POST /progress) para que env√≠e respuesta HTTP tras agregar progreso, solucionando el bug de carga infinita en el frontend
- **Backend**: -aumentado l√≠mite de validaci√≥n de emojis de 8 a 20 caracteres para permitir emojis compuestos
- **Frontend**: -aumentado l√≠mite de entrada de emojis de 4 a 10 caracteres en el formulario
- **Frontend**: -agregados mensajes de √©xito consistentes "¬°H√°bito agregado exitosamente!" para todas las categor√≠as de h√°bitos usando window.alert()
- **Backend**: -corregido el handler de agregar h√°bitos (POST /habits) para que env√≠e respuesta HTTP con habitId, solucionando el problema de que no aparec√≠an mensajes de √©xito
- **Frontend**: -removidos logs de debug del componente HabitSelection para limpiar la consola
- **Backend**: -modificada funci√≥n getHabits para incluir informaci√≥n de progreso y estado de completado por fecha
- **Frontend**: -actualizada funci√≥n getHabits para enviar fecha como par√°metro de consulta
- **Frontend**: -implementado sistema visual de h√°bitos completados: fondo verde, borde verde, texto verde y checkmark ‚úÖ
- **Frontend**: -bot√≥n de completar se deshabilita cuando el h√°bito ya est√° completado
- **Frontend**: -mejorados mensajes de alerta usando window.alert() para mayor confiabilidad
- **Backend**: -agregado soporte para estado "missed" en la funci√≥n getHabits
- **Frontend**: -removida funcionalidad de eliminar h√°bitos
- **Frontend**: -bot√≥n X ahora marca h√°bitos como "fallidos" (rojo) en lugar de eliminarlos
- **Frontend**: -implementado sistema de tres estados: normal (gris), completado (verde), fallido (rojo)
- **Frontend**: -botones se deshabilitan cuando el h√°bito ya est√° en ese estado
- **Backend**: -mejorada funci√≥n addProgress para actualizar progreso existente en lugar de crear duplicados usando findOneAndUpdate con upsert
- **Frontend**: -mejorada validaci√≥n para prevenir marcar h√°bitos que ya tienen estado asignado (completado o fallido)
- **Frontend**: -ambos botones se deshabilitan cuando el h√°bito ya tiene un estado, mostrando mensaje de alerta
- **Frontend**: -mejorado dise√±o visual: botones deshabilitados en gris con opacidad reducida
- **Frontend**: -los s√≠mbolos de los botones de h√°bitos ahora son siempre ‚úÖ y ‚ùå, y solo se muestra uno seg√∫n el estado (pendiente: ambos activos, completado: solo ‚úÖ, fallido: solo ‚ùå)
- **Backend**: -mensaje de error de l√≠mite de h√°bitos actualizado a 'Solo puedes tener hasta 10 h√°bitos activos por d√≠a'
- **Frontend**: -agregada validaci√≥n de fechas pasadas: no se puede marcar progreso en fechas anteriores a hoy
- **Frontend**: -implementada funci√≥n isDateInPast() para verificar si una fecha es anterior a la fecha actual
- **Frontend**: -modificadas funciones handleCompleteHabit y handleFailHabit para validar fechas antes de permitir marcar progreso
- **Frontend**: -agregada indicaci√≥n visual de fechas pasadas: botones de d√≠as anteriores se muestran en gris pero permiten navegaci√≥n
- **Frontend**: -agregado mensaje informativo cuando se visualiza una fecha pasada: "Modo de solo lectura: Est√°s viendo una fecha pasada. Puedes ver el historial pero no marcar progreso"
- **Frontend**: -mejorada funci√≥n getDaysArray para incluir informaci√≥n sobre fechas pasadas (isPast)
- **Frontend**: -actualizada navegaci√≥n de d√≠as: fechas pasadas permiten navegaci√≥n pero se muestran visualmente diferentes (colores grises, hover suave)
- **Frontend**: -enviada fecha espec√≠fica seleccionada al backend en lugar de usar fecha por defecto
- **Frontend**: -mejorada experiencia de usuario: fechas pasadas permiten ver historial pero no marcar progreso
- **Frontend**: -agregado bot√≥n de eliminar h√°bito (üóëÔ∏è) en la p√°gina de Habits
- **Frontend**: -implementada funci√≥n handleDeleteHabit con confirmaci√≥n antes de eliminar
- **Frontend**: -bot√≥n de eliminar disponible en todos los estados del h√°bito (pendiente, completado, fallido)
- **Frontend**: -agregados tooltips (title) a todos los botones para mejor UX
- **Frontend**: -confirmaci√≥n de eliminaci√≥n muestra el nombre del h√°bito para mayor claridad
- **Frontend**: -bot√≥n de eliminar con hover effect que cambia a rojo para indicar acci√≥n destructiva
- **Frontend**: -mejorada funcionalidad de eliminar h√°bitos: ahora ofrece dos opciones seg√∫n el estado del h√°bito
- **Frontend**: -si el h√°bito tiene progreso (completado/fallido): opci√≥n de eliminar solo el progreso de esa fecha
- **Frontend**: -si el h√°bito no tiene progreso: opci√≥n de eliminar el h√°bito completamente
- **Frontend**: -mensajes de confirmaci√≥n m√°s claros y espec√≠ficos seg√∫n la acci√≥n a realizar
- **Backend**: -modificada funci√≥n getHabits para incluir progressId en la respuesta cuando hay progreso
- **Frontend**: -implementadas funciones handleDeleteProgress y handleDeleteHabitCompletely para manejar las dos opciones
- **Sistema**: -eliminaci√≥n inteligente: distingue entre eliminar progreso espec√≠fico y eliminar h√°bito completo
- **Frontend**: -mejorado di√°logo de eliminaci√≥n: ahora ofrece 3 opciones claras usando window.prompt
- **Frontend**: -opciones de eliminaci√≥n: 1) Eliminar solo progreso de fecha espec√≠fica, 2) Eliminar h√°bito completamente, 3) Cancelar
- **Frontend**: -validaci√≥n de entrada: verifica que el usuario escriba 1, 2 o 3, muestra error si es inv√°lido
- **Frontend**: -confirmaci√≥n adicional para eliminaci√≥n completa: doble verificaci√≥n antes de eliminar h√°bito
- **UX**: -interfaz m√°s clara y flexible para diferentes necesidades de eliminaci√≥n
- **Frontend**: -corregida funci√≥n deleteProgress para enviar tanto progressId como habitId al backend
- **Backend**: -funci√≥n deleteProgress requiere validaci√≥n de ownership entre progressId y habitId
- **Sistema**: -eliminaci√≥n de progreso espec√≠fico ahora funciona correctamente con validaci√≥n de seguridad
- **Backend**: -corregida funci√≥n getHabits para buscar progresos por habit en lugar de user, solucionando el problema de que no se encontraban los progresos
- **Backend**: -implementada b√∫squeda de progresos por rango de fechas (todo el d√≠a) en lugar de coincidencia exacta
- **Backend**: -corregida consulta de progresos para usar $in con habitIds del usuario en lugar de buscar por user
- **Sistema**: -funcionalidades de marcar h√°bitos como hecho (‚úÖ), no hecho (‚ùå) y eliminar (üóëÔ∏è) ahora funcionan completamente
- **Sistema**: -integraci√≥n completa entre frontend y backend: los cambios de estado de h√°bitos se reflejan inmediatamente en la interfaz
- **Backend**: -mejorada funci√≥n deleteHabit para devolver respuesta expl√≠cita tras eliminar h√°bito, asegurando actualizaci√≥n correcta del frontend
- **Sistema**: -eliminaci√≥n de h√°bitos ahora actualiza autom√°ticamente la lista en el frontend sin necesidad de recargar la p√°gina

### üìä **Sistema de Progreso**
- **Frontend**: -corregidas funciones addProgress, getProgress, deleteProgress para usar localStorage.getItem('token')
- **Backend**: -corregido el handler de progreso (POST /progress) para que env√≠e respuesta HTTP tras agregar progreso, solucionando el bug de carga infinita en el frontend
- **Frontend**: -corregida funci√≥n addProgress para que coincida con la funci√≥n del backend 
- **Backend**: -mejorada funci√≥n addProgress para actualizar progreso existente en lugar de crear duplicados usando findOneAndUpdate con upsert
- **Frontend**: -corregida funci√≥n deleteProgress para enviar tanto progressId como habitId al backend
- **Backend**: -funci√≥n deleteProgress requiere validaci√≥n de ownership entre progressId y habitId
- **Sistema**: -eliminaci√≥n de progreso espec√≠fico ahora funciona correctamente con validaci√≥n de seguridad

### üìà **Progress Tracker (Nuevo)**
- **Frontend**: -implementado Progress Tracker completamente funcional con selecci√≥n de h√°bitos y calendario visual
- **Frontend**: -agregado selector de h√°bitos que carga din√°micamente desde la base de datos con emojis
- **Frontend**: -implementado calendario mensual con navegaci√≥n entre meses
- **Frontend**: -agregado sistema de colores para fechas: verde (done), rojo (missed), blanco (sin progreso)
- **Frontend**: -implementada leyenda visual para explicar los colores del calendario
- **Frontend**: -agregada carga autom√°tica de progreso al cambiar h√°bito o mes
- **Frontend**: -implementado manejo de errores y estados de carga
- **Backend**: -actualizada funci√≥n getProgress para soportar filtrado por habitId y rango de fechas
- **Backend**: -actualizado handler getProgressHandler para manejar par√°metros habitId, startDate, endDate
- **Frontend**: -actualizada funci√≥n getProgress para enviar par√°metros de filtrado al backend
- **Backend**: -corregida funci√≥n getHabits para manejar casos cuando no se proporciona fecha (necesario para Progress Tracker)
- **Sistema**: -integraci√≥n completa entre frontend y backend para visualizaci√≥n de progreso por h√°bito
- **UX**: -interfaz intuitiva que permite ver el progreso hist√≥rico de cualquier h√°bito en formato calendario

### üßπ **Limpieza y Optimizaci√≥n de C√≥digo**
- **Sistema**: -eliminados todos los logs de debug del backend y frontend
- **Backend**: -limpiados logs de debug en authorizationHandler, addEventHandler, deleteEvent, addProgress
- **Frontend**: -limpiados logs de debug en addEvent, getHabits, getGoals, addProgress, Goals.jsx
- **C√≥digo**: -c√≥digo m√°s limpio y profesional sin logs de desarrollo

### üìã **Cambios Anteriores (Mantenidos)**
- **Endpoints**: -registro
- **Frontend**: -corregido error de tipeo en registerUser.js (metohd ‚Üí method)
- **Frontend**: -corregido campo password-repeat ‚Üí passwordRepeat
- **Frontend**: -corregido URL de API en loginUser.js
